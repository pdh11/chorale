HTTP Headers
------------

All released versions of the Rio Receiver, and of the Empeg car-player
Receiver Edition, have a bug whereby HTTP headers (such as
CONTENT-LENGTH) are tested-for in a case-sensitive manner. As the
software rejects HTTP replies without a content length, this is a
genuine problem. Libupnp 1.4.x uses "CONTENT-LENGTH", so, unless you hack
your copy to use "Content-Length" instead, it won't work.

You will also need to increase MIN_THREADS in upnp/src/inc/config.h to
at least 4, recommended 6. (The webserver doesn't cope well with anti-
social clients such as the Receiver, which asks for large objects but
then, if you hit track skip, decides it doesn't want them after all.)

Here is a patch against libupnp 1.4.4:
-------
--- libupnp-1.4.4/upnp/src/genlib/net/http/httpreadwrite.c~	2007-04-17 04:33:52.000000000 +0100
+++ libupnp-1.4.4/upnp/src/genlib/net/http/httpreadwrite.c	2007-04-28 15:22:22.000000000 +0100
@@ -1965,7 +1965,7 @@ http_MakeMessage( INOUT membuffer * buf,
             if (http_MakeMessage(
                 buf, http_major_version, http_minor_version,
                 "shc",
-                "CONTENT-LENGTH: ", bignum ) != 0 ) {
+                "Content-Length: ", bignum ) != 0 ) {
                 goto error_handler;
             }
         }
--- libupnp-1.4.4/upnp/src/inc/config.h~	2007-01-06 14:25:38.000000000 +0000
+++ libupnp-1.4.4/upnp/src/inc/config.h	2007-04-29 15:43:21.000000000 +0100
@@ -77,7 +77,7 @@
  */
 
 //@{
-#define MIN_THREADS 2 
+#define MIN_THREADS 6
 //@}
 
 /** @name MAX_THREADS
